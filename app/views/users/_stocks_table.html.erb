<h3>Tracked Stocks
  <% if my_portfolio %>
    <small>(<%= stocks.count %>/10)</small>
  <% end %>
</h3>

<table class="table table-striped table-hover" id="stock-tracker">
  <thead>
    <tr>
      <th scope="col">Ticker</th>
      <th scope="col">Company</th>
      <th scope="col", class="text-right">
        <%= link_to "#", class: "no-text-decoration" do%>
          <%= fa_icon "history" %>
        <% end %>
        Last Price
      </th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% stocks.each do |stock| %>
      <tr>
        <th scope="row" class="align-middle"><%= stock.ticker %></th>
        <td class="align-middle"><%= stock.name %></td>
        <td class="align-middle text-right"><%= number_to_currency(stock.last_price) %></td>
        <td class="align-middle">
          <% if my_portfolio %>
            <%= link_to user_stock_path(stock), method: :delete,
              data: { confirm: "Are you sure you would like to stop tracking #{stock.ticker} (#{stock.name})?" } do%>
              <%= fa_icon "times", class: "text-danger" %>
            <% end %>
          <% else %>
            <% if current_user.stock_already_tracked?(stock.ticker) %>
              <%= fa_icon "check", class: "text-success" %>
            <% else %>
              <%= link_to user_stocks_path(user: current_user, ticker: stock.ticker), method: :post do%>
                <%= fa_icon "plus", class: "text-primary" %>
              <% end %>
            <% end %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
